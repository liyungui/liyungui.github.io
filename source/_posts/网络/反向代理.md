---
title: 反向代理
date: 2019-06-04 12:51:53
categories:
  - 网络
tags:
  - 网络
---

# 直接访问

直接访问目标网站

用户直接找到房东租房的这种情况

# 正向代理 forward proxy

客户端向代理服务器发送一个请求并指定目标，然后代理服务器向目标服务器转交请求并将获得的内容返回给客户端。

这种代理其实在生活中是比较常见的，比如科学上网技术，其用到的就是代理技术。

**正向代理，其实是"代理服务器"代理了"客户端"，去和"目标服务器"进行交互**

租房子的时候，一般情况下，我们很难联系到房东，因为有些房东为了图方便，只把自己的房屋信息和钥匙交给中介了。而房客想要租房子，只能通过中介才能联系到房东。而对于房东来说，他可能根本不知道真正要租他的房子的人是谁，他只知道是中介在联系他。

## 正向代理的用途

### 突破访问限制

 通过代理服务器，可以突破自身IP访问限制，访问国外网站，教育网等。即，租客可以通过中介，来解决无法联系上房东的问题。
 
## 提高访问速度

通常代理服务器都设置一个较大的硬盘缓冲区，会将部分请求的响应保存到**缓冲区**中，当其他用户再访问相同的信息时， 则直接由缓冲区中取出信息，传给用户，以提高访问速度。即，中介手里留存了很多房源信息和钥匙，可以直接带租客去看房。

## 隐藏客户端真实IP

# 反向代理 reverse proxy

以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端

**反向代理，其实是"代理服务器"代理了"目标服务器"，去和"客户端"进行交互。**

租房子的时候，我们以为我们接触的是房东，其实有时候也有可能并非房主本人，有可能是他的亲戚、朋友，甚至是二房东。但是我们并不知道和我们沟通的并不是真正的房东。这种帮助真正的房主租房的二房东其实就是反向代理服务器。这个过程就是反向代理。

## 反向代理的用途

### 隐藏服务器真实IP

使用反向代理，可以对客户端隐藏服务器的IP地址。即，租客并不房东知道的真实身份。

### 负载均衡

反向代理服务器可以做负载均衡，根据所有真实服务器的负载情况，将客户端请求分发到不同的真实服务器上。即，二房东发现房主本人很忙，于是找到房主的妻子帮忙处理租房事宜。

### 提高访问速度

反向代理服务器可以对于静态内容及短时间内有大量访问请求的动态内容提供**缓存**服务，提高访问速度。即，二房东同样有房屋信息和钥匙。

### 提供安全保障

反向代理服务器可以作为应用层防火墙，为网站提供对基于Web的攻击行为（例如DoS/DDoS）的防护，更容易排查恶意软件等。还可以为后端服务器统一提供加密和SSL加速（如SSL终端代理），提供HTTP访问认证等。

# 联系与区别

## 共同点

- 位置：都是位于客户端和真实服务器之间
- 功能：都是把客户端的请求转发给服务器，再把服务器的响应转发给客户端
- 都能提高访问速度。

## 不同点

### 代理的目标不同

- 正向代理其实是客户端的代理，帮助客户端访问其无法访问的服务器资源。
- 反向代理则是服务器的代理，帮助服务器做负载均衡，安全防护等。

### 架设者不同

- 正向代理一般是客户端架设的，在自己的机器上和代理服务器上安装一个代理软件。
- 反向代理一般是服务器架设的，比如在自己的机器集群中部署一个反向代理服务器。

### 客户端和服务端可见性

- 正向代理中，隐藏客户端IP。服务器不知道真正的客户端到底是谁，以为访问自己的就是真实的客户端。
- 反向代理中，隐藏服务器IP。客户端不知道真正的服务器是谁，以为自己访问的就是真实的客户端。

### 目的

- 正向代理主要是用来解决访问限制问题。
- 反向代理则是提供负载均衡、安全防护等作用。

# 参考&扩展

- [漫话：如何给女朋友解释什么是反向代理？](https://juejin.im/post/5c737a976fb9a049a81ff5a7)