---
title: PCM音频降噪
date: 2019-09-03 14:52:14
categories:
  - 直播
tags:
  - 直播
---

[PCM音频处理](http://www.jianshu.com/p/77a363960711)

对于降噪前后的对比，从三个方面进行评价：**时域，频域，个人听觉感受**。

音频处理软件：**Audacity**（简单分析降噪效果）

# Speex音频降噪模块 #

Speex是很强大的开源编解码库，也包含一些降噪，自动增益，回音消除等模块功能

Opus是Speex的更优替代方案，但是Opus没有降噪去噪模块

支持的采样率有3种：**8K，16K，44K**

采样送进去降噪的数据需要控制在**20ms**，也就是（20*采样率/1000）个采样点。

Speex的降噪原理：设置音频数据的阀值，过滤掉低于阀值分贝的声音

- 优点：简单，使用Speex编解码库时可以直接使用
- 缺点：会把声音细节抹掉
- 效果：
	- 时域，效果不明显
	- 频域，效果不明显
	- 实际听的效果，降噪后，背景的沙沙声有所减弱，但是总体效果还是不佳

# WebRTC音频降噪模块 #

谷歌出品，必属精品

webrtc的音频处理模块分为降噪ns和nsx，回音消除aec，回声控制acem，音频增益agc，静音检测部分

支持三种采样率，**8K，16K和32K**，如果超过32K，则需要重采样成符合要求的采样率

采样送进去降噪的数据需要控制在**10ms**，也就是（10*采样率/1000）个采样点。

	根据前辈的说法
		32K数据需要使用滤波函数将音频数据分为高频和低频两个部分进行降噪，降噪后再合并为降噪后数据
		8K和16K数据，不需要分为高频低频这个步骤，作为低频数据输入，输出也是通过低频数据返回

- 效果：
	- 时域，音量较低的数据基本被抹平，但是不影响波形清晰
	- 频域，频率峰值明显加强，1500Hz到3500Hz区域，能量普遍下降
	- 实际听的效果的，降噪后，背景的沙沙声基本没有，但是音量也有所下降，直观感觉上比Speex好一些

# 根据PCM文件的音量进行阀值限制 #

以二进制方式打开，PCM数据其实就是音量数据

如果把音量小的声音默认为噪声，则可以通过把音量小的数值替换为0，来实现降噪。但是这个方法的缺点也是明显的，会把很多的比较小的细节声音直接去掉了。

**音量计算公式dB = 20×log(data)**