---
title: 直播技术一-开篇
date: 2019-08-01 16:02:14
categories:
  - 直播
tags:
  - 直播
---

# 直播技术大纲

（一）采集

（二）处理

（三）编码和封装

（四）推流和传输

（五）延迟优化

（六）现代播放器原理

（七）SDK 性能测试模型

# 直播流程

{% asset_img stream.png %}

## 采集

iOS 系统因为软硬件种类不多，硬件适配性较好，所以比较简单。Android 则不同，市面上硬件机型非常多，难以做到一个库适配所有硬件。PC 端的采集也跟各种摄像头驱动有关，推荐使用目前市面上最好用的 PC 端开源免费软件 OBS。

## 处理

视频音频处理，美颜、水印、混音等

## 编码

编码主要难点有两个：

1. 处理硬件兼容性问题。
2. 在高 fps、低 bitrate 和音质画质之间找到平衡。

iOS 端硬件兼容性较好，可以直接采用硬编。而 Android 的硬编的支持则难得多，需要支持各种硬件机型，推荐使用软编。

## 推流和传输

传输涉及到很多端：主播端 -- 服务端 -- CDN -- 观众端。

传统的 CDN 在新时代显得心有余力不足。实现稳定高速的推流上传需要自己做一个直播专属的实时流网络

## 转码

为了让主播推上来的流**适配各个平台端各种不同协议**，需要在服务端做一些流处理工作，比如转码成不同格式支持不同协议如 RTMP、HLS 和 FLV，一路转多路流来适配各种不同的网络状况和不同分辨率的终端设备。

同时，为了配合一些运营需求，比如一些监管部门的要求，需要内容识别如鉴黄的功能。

## 解码和渲染

解码和渲染，也即音视频的播放，目前 iOS 端的播放兼容性较好，在延迟可接受的情况下使用 HLS 协议是最好的选择。Android 的硬件解码和编码一样也存在兼容性问题，目前比较好的开源播放器是基于 ffplay 的 **ijkplayer**


重点：播放器的原理，以及现代视频播放器的基本架构

# 直播场景化解决方案

直播场景如社交直播和游戏直播

背后的技术方案不仅涉及到直播基础服务，还可能涉及到和场景相关的其它技术，如聊天、点赞和弹幕的支持

# 参考&扩展

- [《视频直播技术详解》系列之一：开篇](https://blog.qiniu.com/archives/6606)