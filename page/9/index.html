<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="随心而动，随刃而行">
<meta property="og:type" content="website">
<meta property="og:title" content="风">
<meta property="og:url" content="http://yoursite.com/page/9/index.html">
<meta property="og:site_name" content="风">
<meta property="og:description" content="随心而动，随刃而行">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="风">
<meta name="twitter:description" content="随心而动，随刃而行">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/9/"/>





  <title>风</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">风</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">技术博客</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/03/直播/音频/音频增益/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="风">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/03/直播/音频/音频增益/" itemprop="url">音频增益</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-03T14:52:14+08:00">
                2019-09-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/直播/" itemprop="url" rel="index">
                    <span itemprop="name">直播</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://www.cnblogs.com/mod109/p/5767867.html" target="_blank" rel="noopener">音频增益</a> c++</p>
<p><a href="https://my.oschina.net/jinzei/blog/1305843" target="_blank" rel="noopener">PortAudio+webrtc+lame实现采集降噪增益mp3</a> c++</p>
<pre><code>不同采样率的兼容计算和细节讲的比较详细

先降噪后增益,噪音降低后增益把原声和降低的噪音又都放大了,效果是降噪不太明显,主声增大比较显著. 

可以尝试 降噪–增益–再降噪
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/03/直播/音频/音频播放中切换听筒和扬声器模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="风">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/03/直播/音频/音频播放中切换听筒和扬声器模式/" itemprop="url">音频播放中切换听筒和扬声器模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-03T14:52:14+08:00">
                2019-09-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/直播/" itemprop="url" rel="index">
                    <span itemprop="name">直播</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://blog.csdn.net/wl332197858/article/details/51298868" target="_blank" rel="noopener">音频播放中切换听筒和扬声器模式</a></p>
<h1 id="切换听筒和扬声器模式"><a href="#切换听筒和扬声器模式" class="headerlink" title="切换听筒和扬声器模式"></a>切换听筒和扬声器模式</h1><p>网上的版本都是对于5.0以下可以使用的，实测5.0及以上不能使用，系统没有提供权限给我们修改</p>
<pre><code>audioManager.setSpeakerphoneOn(false);//关闭扬声器  
audioManager.setRouting(AudioManager.MODE_NORMAL, AudioManager.ROUTE_EARPIECE, AudioManager.ROUTE_ALL);  
mediaPlayer.setAudioStreamType(AudioManager.STREAM_VOICE_CALL); 
audioManager.setMode(AudioManager.MODE_IN_CALL);  //把声音设定成Earpiece（听筒）出来，设定为正在通话中  

需要权限： android.permission.MODIFY_AUDIO_SETTINGS
</code></pre><p>兼容5.0及以上的版本分三个步骤</p>
<pre><code>1.播放音频流类型要设置为AudioManager.STREAM_VOICE_CALL
2.在播放前调用AudioSystem.setForceUse(AudioSystem.FOR_COMMUNICATION,AudioSystem.FORCE_NONE);
3.配置权限： android.permission.MODIFY_AUDIO_SETTINGS
</code></pre><p>代码如下：</p>
<pre><code>private void setSpeakerphoneOn(boolean on) {
    try {

        mediaPlayer.setAudioStreamType(AudioManager.STREAM_VOICE_CALL);

        Class audioSystemClass = Class.forName(&quot;android.media.AudioSystem&quot;);
        Method setForceUse = audioSystemClass.getMethod(&quot;setForceUse&quot;, int.class, int.class);

        if (on) {
            audioManager.setMicrophoneMute(false);
            audioManager.setSpeakerphoneOn(true);
            audioManager.setMode(AudioManager.MODE_NORMAL);
        } else {
            audioManager.setSpeakerphoneOn(false);
            audioManager.setMode(AudioManager.MODE_NORMAL);
            setForceUse.invoke(null, 0, 0);
            audioManager.setMode(AudioManager.MODE_IN_COMMUNICATION);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre><h1 id="播放中切换"><a href="#播放中切换" class="headerlink" title="播放中切换"></a>播放中切换</h1><p>在播放声音过程中切换，是无法立即生效的，只有当调用 <code>mediaPlayer.prepare()</code> 后才起效</p>
<p>解决方案： 每次切换模式后，强制重新开始播放（微信就是从头开始播放）</p>
<pre><code>mediaPlayer.reset();
mediaPlayer.setDataSource(filePath);
mediaPlayer.prepare();
mediaPlayer.start();
</code></pre><h1 id="自动切换"><a href="#自动切换" class="headerlink" title="自动切换"></a><a href="http://blog.csdn.net/jjmm2009/article/details/37930449" target="_blank" rel="noopener">自动切换</a></h1><p>耳朵靠近时听筒播放，离开后扬声器播放</p>
<p>插入耳机耳机播放，拔出耳机扬声器播放</p>
<p>解决方案： </p>
<ol>
<li><p>利用<strong>距离感应器</strong>感应距离，当距离超过感应器最大距离（说明没有阻挡），就是扬声器播放</p>
<pre><code>SensorManager sensorManager = (SensorManager) context.getSystemService(Context.SENSOR_SERVICE);
final Sensor sensor = sensorManager.getDefaultSensor(Sensor.TYPE_PROXIMITY);
sensorManager.registerListener(new SensorEventListener() {
    @Override
    public void onSensorChanged(SensorEvent event) {
        if (isPlaying) {
            float range = event.values[0];
            if (range == sensor.getMaximumRange()) {
                Toast.makeText(context, &quot;正常模式&quot;, Toast.LENGTH_LONG).show();
                setSpeakerphoneOn(true);
            } else {
                Toast.makeText(context, &quot;听筒模式&quot;, Toast.LENGTH_LONG).show();
                setSpeakerphoneOn(false);
            }
            startPlayVoice(message.getLocalurl());
        }
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }
}, sensor, SensorManager.SENSOR_DELAY_NORMAL);    
</code></pre></li>
<li><p><strong>耳机插拔广播接受者</strong></p>
<p> 监听广播 AudioManager.ACTION_AUDIO_BECOMING_NOISY和 android.intent.action.HEADSET_PLUG</p>
<pre><code>public class HeadsetPlugReceiver extends BroadcastReceiver {   
    @Override   
    public void onReceive(Context context, Intent intent) {   
        Log.i(&quot;NoisyAudioStreamReceiver=====================&gt;&quot;, &quot;change mode&quot;);  
        if (intent.hasExtra(&quot;state&quot;)){   
            if (intent.getIntExtra(&quot;state&quot;, 0) == 0){   
                Log.i(&quot;NoisyAudioStreamReceiver=====================&gt;headset not connected&quot;, &quot;change mode1&quot;);  
                audioManager.setMode(AudioManager.MODE_NORMAL);  
            }   
            else if (intent.getIntExtra(&quot;state&quot;, 0) == 1){   
                Log.i(&quot;NoisyAudioStreamReceiver=====================&gt;headset connected&quot;, &quot;change mode3&quot;);  
                audioManager.setMode(AudioManager.MODE_IN_CALL);  
            }   
        }   
    }   
} 

广播注册：
    myNoisyAudioStreamReceiver = new HeadsetPlugReceiver();  
    IntentFilter intentFilter = new IntentFilter(AudioManager.ACTION_AUDIO_BECOMING_NOISY);  
    intentFilter.addAction(&quot;android.intent.action.HEADSET_PLUG&quot;);  
    registerReceiver(myNoisyAudioStreamReceiver, intentFilter);    
</code></pre></li>
<li><p><strong>总结</strong></p>
<ul>
<li>耳机插拔可以不用监听，因为系统会自动处理（插入耳机用耳机，拔出耳机用扬声器）</li>
<li>添加了距离感应器切换扬声器和听筒后，系统自带的耳机插拔处理会失效<ul>
<li>原因：因为 距离感应器切换扬声器和听筒只有扬声器和听筒两种状态</li>
<li>解决：距离感应器增加判断，当有耳机插入时，什么也不做 <code>audioManager.isWiredHeadsetOn()</code></li>
</ul>
</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/02/Android/TransactionTooLargeException错误/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="风">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/02/Android/TransactionTooLargeException错误/" itemprop="url">TransactionTooLargeException错误</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-02T17:54:53+08:00">
                2019-09-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="表现"><a href="#表现" class="headerlink" title="表现"></a>表现</h1><pre><code>TransactionTooLargeException: data parcel size 587588  bytes
</code></pre><h1 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h1><p><strong>Binder传递数据量过大</strong>    </p>
<p>进程内Binder缓冲区最大上限1M（进程内所有线程共享这块空间，实际上操作的线程内，数据超过200K都可能挂掉）</p>
<p>在6.0的源码 <code>/frameworks/base/core/jni/android_util_Binder.cpp</code>v中的 <code>signalExceptionForError</code> 函数里，对于 <code>FAILED_TRANSACTION</code> 这种错误的分支里，丢出了异常，不过还是有让人困惑的地方：传递的数据超过200K就要报错</p>
<h2 id="Activity状态Bundle"><a href="#Activity状态Bundle" class="headerlink" title="Activity状态Bundle"></a>Activity状态Bundle</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSaveInstanceState</span><span class="params">(Bundle outState)</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Activity跳转Intent"><a href="#Activity跳转Intent" class="headerlink" title="Activity跳转Intent"></a>Activity跳转Intent</h2><p>通过Intent传递数据，具体的大小限制不同版本的系统不同，比较普遍的一个看法是不能超过1MB，因为官方文档里有这样的说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The Binder transaction failed because it was too large.</span><br><span class="line"></span><br><span class="line">During a remote procedure call, the arguments and the return value of the call are transferred as Parcel objects stored in the Binder transaction buffer. If the arguments or the return value are too large to fit in the transaction buffer, then the call will fail and TransactionTooLargeException will be thrown.</span><br><span class="line"></span><br><span class="line">The Binder transaction buffer has a limited fixed size, currently 1Mb, which is shared by all transactions in progress for the process. Consequently this exception can be thrown when there are many transactions in progress even when most of the individual transactions are of moderate size.</span><br></pre></td></tr></table></figure>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="压缩数据量"><a href="#压缩数据量" class="headerlink" title="压缩数据量"></a>压缩数据量</h2><h2 id="使用其他方式传递数据"><a href="#使用其他方式传递数据" class="headerlink" title="使用其他方式传递数据"></a>使用其他方式传递数据</h2><ul>
<li>文件</li>
<li>EventBus</li>
</ul>
<h1 id="参考-amp-扩展"><a href="#参考-amp-扩展" class="headerlink" title="参考&amp;扩展"></a>参考&amp;扩展</h1><ul>
<li><a href="https://www.jianshu.com/p/044e2c318306" target="_blank" rel="noopener">Android TransactionTooLargeException 解析，思考与监控方案</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/31/web/wordpress/主题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="风">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/31/web/wordpress/主题/" itemprop="url">主题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-31T17:35:14+08:00">
                2019-08-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index">
                    <span itemprop="name">web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Flatsome"><a href="#Flatsome" class="headerlink" title="Flatsome"></a>Flatsome</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">requests数量：过多 90+</span><br><span class="line"></span><br><span class="line">电商主题</span><br></pre></td></tr></table></figure>
<h1 id="Avada"><a href="#Avada" class="headerlink" title="Avada"></a>Avada</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">功能：全面而强大</span><br><span class="line">编辑器：体验很好</span><br><span class="line">个性化设置：丰富</span><br><span class="line">requests数量：过多 120+</span><br><span class="line">服务器资源要求：高</span><br><span class="line"></span><br><span class="line">ThemeForest市场上最畅销的主题，但它并不是WordPress最畅销的主题。</span><br><span class="line">将Avada用于电子商务网站是在寻找麻烦。电子商务网站拥有更多的资源需求，需要精简高效且编码良好的主题。</span><br><span class="line">使用后端页面构建器，浪费很多时间在前端和后端切换验证每一个小变化；</span><br></pre></td></tr></table></figure>
<p><a href="http://libs.websoft9.com/apps/wordpress/wordpress5.0.2-avada5.7.2-en.tar.gz" target="_blank" rel="noopener">Websoft9 Avada5.7.2 官方原版下载</a></p>
<h1 id="Enfold"><a href="#Enfold" class="headerlink" title="Enfold"></a>Enfold</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">编辑器：体验很好;优于avada</span><br><span class="line">requests数量：50+</span><br><span class="line">个性化设置：略欠缺，需要custom css</span><br></pre></td></tr></table></figure>
<h1 id="Betheme"><a href="#Betheme" class="headerlink" title="Betheme"></a>Betheme</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">requests数量：40+</span><br><span class="line"></span><br><span class="line">WP主题 TOP5</span><br></pre></td></tr></table></figure>
<h1 id="Impreza"><a href="#Impreza" class="headerlink" title="Impreza"></a>Impreza</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">requests数量：30+</span><br><span class="line"></span><br><span class="line">最大的主题库themeforest 中的wordpress好评排名第一。</span><br><span class="line">推荐外贸建站的WordPress用户使用Impreza</span><br></pre></td></tr></table></figure>
<h1 id="GeneratePress"><a href="#GeneratePress" class="headerlink" title="GeneratePress"></a>GeneratePress</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">requests数量：40+；速度最快，谷歌速度分数：A（95％）</span><br><span class="line"></span><br><span class="line">轻量级主题</span><br></pre></td></tr></table></figure>
<h1 id="参考-amp-扩展"><a href="#参考-amp-扩展" class="headerlink" title="参考&amp;扩展"></a>参考&amp;扩展</h1><ul>
<li><a href="https://www.liaosam.com/wordpress-theme-avada-enfold-betheme.html/comment-page-1" target="_blank" rel="noopener">Avada &amp; Enfold &amp; Betheme：最棒的三个外贸建站英文主题</a></li>
<li><a href="https://www.imaiko.com/why-i-not-choose-avada.html" target="_blank" rel="noopener">为什么我不推荐Avada</a></li>
<li><a href="https://www.imaiko.com/avada-divi-impreza.html" target="_blank" rel="noopener">三个主题比较，Avada，Divi和Impreza</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/29/Android/APP弱网络测试工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="风">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/29/Android/APP弱网络测试工具/" itemprop="url">APP弱网络测试工具</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-29T15:40:53+08:00">
                2019-08-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>弱网络专项测试的方案主要有</p>
<h1 id="PC上使用抓包工具设置延时模拟弱网"><a href="#PC上使用抓包工具设置延时模拟弱网" class="headerlink" title="PC上使用抓包工具设置延时模拟弱网"></a>PC上使用抓包工具设置延时模拟弱网</h1><ul>
<li>在PC上的Fiddler在设置延时</li>
<li>将Android设备的网络代理到PC上</li>
</ul>
<h1 id="专有服务器上构建弱网络Wi-Fi"><a href="#专有服务器上构建弱网络Wi-Fi" class="headerlink" title="专有服务器上构建弱网络Wi-Fi"></a>专有服务器上构建弱网络Wi-Fi</h1><ul>
<li>在专有服务器上构建弱网络Wi-Fi</li>
<li>移动设备连接该Wi-Fi进行弱网络测试</li>
</ul>
<p>相关的技术方案有Facebook的ATC和腾讯的Wetest-WiFi;</p>
<h1 id="缺陷"><a href="#缺陷" class="headerlink" title="缺陷"></a>缺陷</h1><ul>
<li>需要额外的PC或者服务器，弱网环境构建成本高；</li>
<li>需要安装、部署额外的工具，并且弱网络环境需要在PC上或者Web上进行配置，使用成本高；</li>
<li>弱网络环境功能并不完善，比如Fiddler不支持丢包、抖动等弱网环境；</li>
</ul>
<h1 id="QNET"><a href="#QNET" class="headerlink" title="QNET"></a>QNET</h1><ul>
<li>无需ROOT手机，只需安装一个独立app</li>
<li>弱网模拟功能强大。2G，3G，4G，丢包，抖动</li>
<li>支持 TCP/UDP网络协议抓包，导出为Pcap文件</li>
</ul>
<h2 id="已知问题"><a href="#已知问题" class="headerlink" title="已知问题"></a>已知问题</h2><p>引起APP频繁刷新，某些生命周期相关的方法会频繁回调，可能引起ANR</p>
<h1 id="参考-amp-扩展"><a href="#参考-amp-扩展" class="headerlink" title="参考&amp;扩展"></a>参考&amp;扩展</h1><ul>
<li><a href="https://www.520mwx.com/view/53152" target="_blank" rel="noopener">QNET，一款给力的APP弱网络测试工具</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/20/web/Chrome诊断网页打开慢的原因/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="风">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/20/web/Chrome诊断网页打开慢的原因/" itemprop="url">Chrome诊断网页打开慢的原因</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-20T09:05:14+08:00">
                2019-08-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index">
                    <span itemprop="name">web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h1><ul>
<li>打开目标网页</li>
<li>打开开发者模式</li>
<li>右键浏览器的刷新按钮，选择 <code>清空缓存并硬性重新加载</code><ul>
<li>正常重新加载 Ctrl+R：正常重新加载。 </li>
<li>硬性重新加载：Ctrl+Shift+R:浅层次的清除历史记录，但不一定缓存完全清除。(Ctrl+F5)同理。 </li>
<li>清空缓存并硬性重新加载：可以深层次的清除所有的缓存。(建议用这个) </li>
</ul>
</li>
</ul>
<h1 id="诊断"><a href="#诊断" class="headerlink" title="诊断"></a>诊断</h1><p>上面流程加载完成后，开发者工具 <code>network</code> 标签如下</p>
<img src="/2019/08/20/web/Chrome诊断网页打开慢的原因/chrome-network.png"> 
<h2 id="重要指标"><a href="#重要指标" class="headerlink" title="重要指标"></a>重要指标</h2><p>底部展示了几个重要的指标</p>
<ul>
<li>请求成功数量/请求总数量</li>
<li>网页加载成功体积/网页总体积</li>
<li>资源加载成功体积/资源总体积</li>
<li>耗时</li>
</ul>
<h2 id="时间线-详细耗时信息"><a href="#时间线-详细耗时信息" class="headerlink" title="时间线-详细耗时信息"></a>时间线-详细耗时信息</h2><p>网记请求列表，默认是按时间顺序排序(waterfall瀑布)</p>
<p>找到耗时最长的几个请求</p>
<p>鼠标悬停某个请求的waterfall会弹窗展示耗时的详细信息，如下</p>
<img src="/2019/08/20/web/Chrome诊断网页打开慢的原因/time-detail.png"> 
<img src="/2019/08/20/web/Chrome诊断网页打开慢的原因/time-detail-2.png"> 
<h2 id="时间线各阶段指标"><a href="#时间线各阶段指标" class="headerlink" title="时间线各阶段指标"></a>时间线各阶段指标</h2><h3 id="Queueing-排队时间"><a href="#Queueing-排队时间" class="headerlink" title="Queueing(排队时间)"></a>Queueing(排队时间)</h3><p>如果某个请求正在排队，则指示：</p>
<ul>
<li>请求已被渲染引擎推迟<ul>
<li>因为该请求的优先级被视为低于关键资源（例如脚本/样式）的优先级。 </li>
<li>图像经常发生这种情况。</li>
</ul>
</li>
<li>请求已被暂停，以等待可复用的TCP连接。<ul>
<li>因为在 HTTP 1 上，浏览器仅允许每个源拥有六个 TCP 连接。</li>
</ul>
</li>
<li>生成磁盘缓存条目所用的时间（通常非常迅速）</li>
</ul>
<h3 id="Stalled-Blocking"><a href="#Stalled-Blocking" class="headerlink" title="Stalled/Blocking"></a>Stalled/Blocking</h3><p>浏览器得到要发出这个请求的指令，到请求可以发出的<strong>等待时间</strong></p>
<p>可以是等待 Queueing 中介绍的任何一个原因。 </p>
<p>此外，此时间包含代理协商所用的时间。</p>
<p>不包括DNS查询、建立TCP连接等时间。</p>
<h3 id="Proxy-Negotiation"><a href="#Proxy-Negotiation" class="headerlink" title="Proxy Negotiation"></a>Proxy Negotiation</h3><p>与代理服务器连接协商所用的时间。</p>
<h3 id="DNS-lookup"><a href="#DNS-lookup" class="headerlink" title="DNS lookup"></a>DNS lookup</h3><p>DNS解析所耗费的时间。</p>
<h3 id="Initial-connection"><a href="#Initial-connection" class="headerlink" title="Initial connection"></a>Initial connection</h3><p>用户建立连接的时间，包括TCP握手以及多次尝试握手，以及处理SSL的时间。</p>
<h3 id="SSL"><a href="#SSL" class="headerlink" title="SSL"></a>SSL</h3><p>完成SSL握手的时间。</p>
<h3 id="Request-sent"><a href="#Request-sent" class="headerlink" title="Request_sent"></a>Request_sent</h3><p>请求第一个字节发出到最后一个字节发出的时间，请求发出时间(一般可以忽略，否则即为浏览器本身或者本地网络问题)。</p>
<p>Waitting(TTFB)：请求发出后，到收到响应的第一个字节所花费的时间(Time To First Byte)，即请求从客户端发送给服务端时间+服务器处理请求的时间。</p>
<h3 id="Content-Download"><a href="#Content-Download" class="headerlink" title="Content Download"></a>Content Download</h3><p>接收到响应的第一个字节，到接收完最后一个字节的时间，就是下载响应所耗费的时间。</p>
<h2 id="诊断问题"><a href="#诊断问题" class="headerlink" title="诊断问题"></a>诊断问题</h2><h3 id="队列时间过长"><a href="#队列时间过长" class="headerlink" title="队列时间过长"></a>队列时间过长</h3><h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><p>从单个网域检索太多的资源，即<strong>单个网域的请求数量过多</strong></p>
<p>在 HTTP 1.0/1.1 连接上，Chrome 会将每个主机强制设置为最多六个 TCP 连接。如果您一次请求十二个条目，前六个将开始，而后六个将被加入队列。</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><h5 id="HTTP-1"><a href="#HTTP-1" class="headerlink" title="HTTP 1"></a>HTTP 1</h5><ul>
<li>合并 图片、css、js等一些可以合并的文件，来减少http的请求数</li>
<li>设置 <code>keep-alive</code> 可以在一定的时间内保证连接的可复用性，减少连接时间</li>
<li>实现域分片。也就是在您的应用上设置多个子域，以便提供资源。然后，在子域之间平均分配正在提供的资源。<ul>
<li>在浏览器最大并行下载数跟dns查找(也有耗时)之间做权衡。根据雅虎的研究，最好将主机名控制在2-4个内</li>
</ul>
</li>
</ul>
<h5 id="HTTP-2"><a href="#HTTP-2" class="headerlink" title="HTTP 2"></a>HTTP 2</h5><p>请不要对您的资源进行域分片</p>
<p>在 HTTP 2 中，到服务器的单个 TCP 连接作为多路复用连接。这消除了 HTTP 1 中的六个连接限制，并且可以通过单个连接同时传输多个资源。</p>
<h3 id="第一字节等待时间过长"><a href="#第一字节等待时间过长" class="headerlink" title="第一字节等待时间过长"></a>第一字节等待时间过长</h3><p>又称：大片绿色</p>
<p>将此值控制在 200 毫秒以下</p>
<h4 id="原因-1"><a href="#原因-1" class="headerlink" title="原因"></a>原因</h4><ol>
<li>客户端与服务器之间的网络条件较差</li>
<li><strong>服务器应用的响应慢</strong></li>
</ol>
<h4 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h4><p>将应用托管在本地，然后查看 TTFB 真实的响应速度。如果仍然很长，则需要优化应用的响应速度。可以是优化数据库查询、为特定部分的内容实现缓存，或者修改您的网络服务器配置。</p>
<h3 id="内容下载时间过长"><a href="#内容下载时间过长" class="headerlink" title="内容下载时间过长"></a>内容下载时间过长</h3><p>又称：大片蓝色。决定服务器吞吐能力</p>
<h4 id="原因-2"><a href="#原因-2" class="headerlink" title="原因"></a>原因</h4><p><strong>内容体积过大</strong></p>
<h4 id="解决方案-2"><a href="#解决方案-2" class="headerlink" title="解决方案"></a>解决方案</h4><ul>
<li>减少发送的字节数</li>
<li>压缩文件</li>
<li>启用本地缓存。把网站里面更新频率比较低的静态资源缓存在浏览器中</li>
<li>启用CDN加速。本质也是缓存，把内容缓存在离用户近的主机</li>
</ul>
<h1 id="参考-amp-扩展"><a href="#参考-amp-扩展" class="headerlink" title="参考&amp;扩展"></a>参考&amp;扩展</h1><ul>
<li><a href="https://help.aliyun.com/knowledge_detail/36453.html" target="_blank" rel="noopener">使用chrome浏览器排查网页打开慢的方法</a></li>
<li><a href="https://blog.csdn.net/shan1991fei/article/details/80690220" target="_blank" rel="noopener">Chrome Dev Tool 中时间线各阶段代表的意义</a></li>
<li><a href="https://www.liulanqi.com/239.html" target="_blank" rel="noopener">了解资源耗时 | Chrome F12 network</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/16/编程思想/Android端架构_MVP-Clean架构/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="风">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/16/编程思想/Android端架构_MVP-Clean架构/" itemprop="url">Android端架构_MVP-Clean架构</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-16T11:46:01+08:00">
                2019-08-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程思想/" itemprop="url" rel="index">
                    <span itemprop="name">编程思想</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Activity跳转"><a href="#Activity跳转" class="headerlink" title="Activity跳转"></a>Activity跳转</h1><p>Activity跳转是如何实现的</p>
<p><code>BaseActivity</code> 持有 <code>Navigator</code>，Activity A 调用 Navigator 相应的跳转方法。</p>
<p>每个Activity 都需要提供启动自己的Intent，而不是由Navigator构造</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Navigator</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">navigateToUserList</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (context != <span class="keyword">null</span>) &#123;</span><br><span class="line">      Intent intentToLaunch = UserListActivity.getCallingIntent(context);</span><br><span class="line">      context.startActivity(intentToLaunch);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserListActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Intent <span class="title">getCallingIntent</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Intent(context, UserListActivity.class);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">navigator.navigateToUserList(<span class="keyword">this</span>);<span class="comment">//跳转到UserListActivity</span></span><br></pre></td></tr></table></figure>
<h1 id="完整的渲染数据过程"><a href="#完整的渲染数据过程" class="headerlink" title="完整的渲染数据过程"></a>完整的渲染数据过程</h1><p>以用户列表页为例</p>
<h2 id="presentation-表现层"><a href="#presentation-表现层" class="headerlink" title="presentation 表现层"></a>presentation 表现层</h2><h3 id="model"><a href="#model" class="headerlink" title="model"></a>model</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserModel</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="view"><a href="#view" class="headerlink" title="view"></a>view</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">LoadDataView</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">showLoading</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">hideLoading</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">showRetry</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">hideRetry</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">showError</span><span class="params">(String message)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function">Context <span class="title">context</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserListView</span> <span class="keyword">extends</span> <span class="title">LoadDataView</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Render a user list in the UI.</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">renderUserList</span><span class="params">(Collection&lt;UserModel&gt; userModelCollection)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//View a UserModel profile/details.</span></span><br><span class="line">  <span class="comment">//Presenter call this when click a UserModel</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">viewUser</span><span class="params">(UserModel userModel)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserListFragment</span> <span class="keyword">extends</span> <span class="title">BaseFragment</span> <span class="keyword">implements</span> <span class="title">UserListView</span> </span>&#123;</span><br><span class="line">  UserListPresenter userListPresenter;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewCreated</span><span class="params">(View view, Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onViewCreated(view, savedInstanceState);</span><br><span class="line">    <span class="keyword">this</span>.userListPresenter.setView(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">if</span> (savedInstanceState == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.loadUserList();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">renderUserList</span><span class="params">(Collection&lt;UserModel&gt; userModelCollection)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (userModelCollection != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.usersAdapter.setUsersCollection(userModelCollection);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">viewUser</span><span class="params">(UserModel userModel)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mActivity != <span class="keyword">null</span>) &#123;</span><br><span class="line">      mActivity.navigator.navigateToUserDetails(mActivity, userModel.getUserId());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//Loads all users.</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">loadUserList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.userListPresenter.loadUserList();</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="presenter"><a href="#presenter" class="headerlink" title="presenter"></a>presenter</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserListPresenter</span> <span class="keyword">implements</span> <span class="title">Presenter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> UserListView viewListView;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> GetUserList getUserListUseCase;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> UserModelDataMapper userModelDataMapper;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">UserListPresenter</span><span class="params">(GetUserList getUserListUserCase,</span></span></span><br><span class="line"><span class="function"><span class="params">      UserModelDataMapper userModelDataMapper)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.getUserListUseCase = getUserListUserCase;</span><br><span class="line">    <span class="keyword">this</span>.userModelDataMapper = userModelDataMapper;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setView</span><span class="params">(@NonNull UserListView view)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.viewListView = view;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showUsersCollectionInView</span><span class="params">(Collection&lt;User&gt; usersCollection)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Collection&lt;UserModel&gt; userModelsCollection =</span><br><span class="line">        <span class="keyword">this</span>.userModelDataMapper.transform(usersCollection);</span><br><span class="line">    <span class="keyword">this</span>.viewListView.renderUserList(userModelsCollection);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">getUserList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.getUserListUseCase.execute(<span class="keyword">new</span> UserListObserver(), <span class="keyword">null</span>);</span><br><span class="line">  &#125; </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">UserListObserver</span> <span class="keyword">extends</span> <span class="title">DefaultObserver</span>&lt;<span class="title">List</span>&lt;<span class="title">User</span>&gt;&gt; </span>&#123;<span class="comment">//DisposableObserver继承rxjava2的DisposableObserver</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      UserListPresenter.<span class="keyword">this</span>.hideViewLoading();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">      UserListPresenter.<span class="keyword">this</span>.hideViewLoading();</span><br><span class="line">      UserListPresenter.<span class="keyword">this</span>.showErrorMessage(<span class="keyword">new</span> DefaultErrorBundle((Exception) e));</span><br><span class="line">      UserListPresenter.<span class="keyword">this</span>.showViewRetry();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(List&lt;User&gt; users)</span> </span>&#123;</span><br><span class="line">      UserListPresenter.<span class="keyword">this</span>.showUsersCollectionInView(users);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="domain-领域层"><a href="#domain-领域层" class="headerlink" title="domain 领域层"></a>domain 领域层</h2><h3 id="entity"><a href="#entity" class="headerlink" title="entity"></a>entity</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Class that represents a User in the domain layer.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="interactor-use-case"><a href="#interactor-use-case" class="headerlink" title="interactor(use case)"></a>interactor(use case)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetUserListUseCase</span> <span class="keyword">extends</span> <span class="title">UseCase</span>&lt;<span class="title">List</span>&lt;<span class="title">User</span>&gt;, <span class="title">Void</span>&gt; </span>&#123;</span><br><span class="line">	<span class="comment">//调用 data层的UserRepository</span></span><br><span class="line">	<span class="comment">//将可观察的用户列表，发射到上面presenter指定的观察者</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="data-数据层"><a href="#data-数据层" class="headerlink" title="data 数据层"></a>data 数据层</h2><h3 id="entity-1"><a href="#entity-1" class="headerlink" title="entity"></a>entity</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * User Entity used in the data layer.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserEntity</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="repository"><a href="#repository" class="headerlink" title="repository"></a>repository</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Interface that represents a Repository for getting &#123;<span class="doctag">@link</span> User&#125; related data.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserRepository</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="datasource"><a href="#datasource" class="headerlink" title="datasource"></a>datasource</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Interface that represents a data store from where data is retrieved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDataStore</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CloudUserDataStore</span> <span class="keyword">implements</span> <span class="title">UserDataStore</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DiskUserDataStore</span> <span class="keyword">implements</span> <span class="title">UserDataStore</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Factory that creates different implementations of &#123;<span class="doctag">@link</span> UserDataStore&#125;.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Singleton</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDataStoreFactory</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="cache"><a href="#cache" class="headerlink" title="cache"></a>cache</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * An interface representing a user Cache.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserCache</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="net"><a href="#net" class="headerlink" title="net"></a>net</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * RestApi for retrieving data from the network.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RestApi</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Dagger2"><a href="#Dagger2" class="headerlink" title="Dagger2"></a>Dagger2</h1><p>是否使用，这个具体问题具体分析。更多内容参考 Dagger2 文档</p>
<h1 id="参考-amp-扩展"><a href="#参考-amp-扩展" class="headerlink" title="参考&amp;扩展"></a>参考&amp;扩展</h1><ul>
<li><a href="https://github.com/android10/Android-CleanArchitecture" target="_blank" rel="noopener">实例源码</a>by Fernando Cejas (Fernando 大神)</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/15/电脑使用/SimpleUML使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="风">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/15/电脑使用/SimpleUML使用/" itemprop="url">SimpleUML使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-15T14:19:13+08:00">
                2019-08-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UML/" itemprop="url" rel="index">
                    <span itemprop="name">UML</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="SimpleUML-是什么"><a href="#SimpleUML-是什么" class="headerlink" title="SimpleUML 是什么"></a>SimpleUML 是什么</h1><p>可以按照包名等条件设置过滤条件，显示自己关心的部分。</p>
<p>根据源码自动生成UML 类图 包图 序列图</p>
<p>复杂结构生成后几乎不可用，全靠手动调整依赖</p>
<h1 id="AndroidStudio-中使用-SimpleUML"><a href="#AndroidStudio-中使用-SimpleUML" class="headerlink" title="AndroidStudio 中使用 SimpleUML"></a>AndroidStudio 中使用 SimpleUML</h1><ul>
<li>AndroidStudio 安装 SimpleUML 插件</li>
<li>重启</li>
<li>某个 <code>包/类</code> 上右击，选择 <code>Add to simpleUML Diagram</code></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/15/编程思想/UML/SimpleUML使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="风">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/15/编程思想/UML/SimpleUML使用/" itemprop="url">SimpleUML使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-15T14:19:13+08:00">
                2019-08-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UML/" itemprop="url" rel="index">
                    <span itemprop="name">UML</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="SimpleUML-是什么"><a href="#SimpleUML-是什么" class="headerlink" title="SimpleUML 是什么"></a>SimpleUML 是什么</h1><p>根据源码自动生成UML类图</p>
<h1 id="AndroidStudio-中使用-SimpleUML"><a href="#AndroidStudio-中使用-SimpleUML" class="headerlink" title="AndroidStudio 中使用 SimpleUML"></a>AndroidStudio 中使用 SimpleUML</h1><ul>
<li>AndroidStudio 安装 SimpleUML 插件</li>
<li>重启</li>
<li>某个 <code>包/类</code> 上右击，选择 <code>Add to simpleUML Diagram</code></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/15/编程思想/UML/UML概述/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="风">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/15/编程思想/UML/UML概述/" itemprop="url">UML概述</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-15T14:19:13+08:00">
                2019-08-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UML/" itemprop="url" rel="index">
                    <span itemprop="name">UML</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h1><p>UML（Unified Modeling Language）统一建模语言</p>
<h1 id="为什么用UML"><a href="#为什么用UML" class="headerlink" title="为什么用UML"></a>为什么用UML</h1><p>文不如表，表不如图，图不如实（原型图）</p>
<p>文字的缺陷：大耳朵，长鼻子，獠牙–野猪还是小象</p>
<p>图表的缺陷：长方形–一块地还是一间房</p>
<h1 id="如何学好UML"><a href="#如何学好UML" class="headerlink" title="如何学好UML"></a>如何学好UML</h1><p>和学看图说话道理一样，记住两个要素：<strong>节点和联系</strong></p>
<h1 id="UML工具"><a href="#UML工具" class="headerlink" title="UML工具"></a>UML工具</h1><h2 id="图形化操作"><a href="#图形化操作" class="headerlink" title="图形化操作"></a>图形化操作</h2><h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><h4 id="starUML"><a href="#starUML" class="headerlink" title="starUML"></a>starUML</h4><p>免费开源、小巧</p>
<h4 id="rose"><a href="#rose" class="headerlink" title="rose"></a>rose</h4><p>收费破解 庞大 功能强大 漂亮 好用</p>
<h4 id="visio"><a href="#visio" class="headerlink" title="visio"></a>visio</h4><h3 id="web在线"><a href="#web在线" class="headerlink" title="web在线"></a>web在线</h3><h4 id="ProcessOn"><a href="#ProcessOn" class="headerlink" title="ProcessOn"></a>ProcessOn</h4><h2 id="专门语法"><a href="#专门语法" class="headerlink" title="专门语法"></a>专门语法</h2><h3 id="webChart"><a href="#webChart" class="headerlink" title="webChart"></a>webChart</h3><p>web在线</p>
<h3 id="PlantUML"><a href="#PlantUML" class="headerlink" title="PlantUML"></a>PlantUML</h3><p>不仅可以嵌套到各种文本编辑器，IDE，也提供在线版。</p>
<h1 id="UML的构造包含3种："><a href="#UML的构造包含3种：" class="headerlink" title="UML的构造包含3种："></a>UML的构造包含3种：</h1><ul>
<li><strong>事物</strong>（4种）：事物是对模型中最具代表性的成分的抽象<ul>
<li>结构事物</li>
<li>行为事物</li>
<li>分组事物</li>
<li>注释事物</li>
</ul>
</li>
<li><strong>关系</strong>（4种）：关系把事物结合在一起<ul>
<li>泛化关系</li>
<li>实现关系</li>
<li>依赖关系</li>
<li>关联关系</li>
</ul>
</li>
<li><strong>图</strong>（10种）：图聚集了相关的事物<ul>
<li>用例图(UseCase)。用户(管理员、版主)行为(用户管理、帖子置顶)</li>
<li>类图(Class)。类(用例图抽象成类)的结构及类间的关系</li>
<li>对象图(Object)。某一时刻的类实例对象</li>
<li>状态图(Statechart)。类实例对象的状态及状态改变的条件</li>
<li>序列图(Sequence)。时序图，循序图。类实例对象按时间顺序的交互</li>
<li>协作图(Collaboration)。类实例对象的组织关系和相互作用</li>
<li>活动图(Activity)。流程图。控制流；一个用例所要进行的活动及活动间关系(用户刷卡：用户刷卡-系统输入刷卡额度-数据库更新表-系统显示刷卡成功)</li>
<li>包图(Package)。java 中的package；可以理解为文件夹</li>
<li>组件图(Component)。系统的物理结构及相互关系</li>
<li>部署图(Deployment)。系统的物理部署(刷卡机，客户端，数据库服务器）</li>
</ul>
</li>
</ul>
<h1 id="图（10种）"><a href="#图（10种）" class="headerlink" title="图（10种）"></a>图（10种）</h1><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><table>
<thead>
<tr>
<th>图</th>
<th>结构/行为</th>
<th>角度</th>
</tr>
</thead>
<tbody>
<tr>
<td>用例图</td>
<td>行为(动态)</td>
<td>用例视图</td>
</tr>
<tr>
<td>类图</td>
<td>结构(静态)</td>
<td>设计视图</td>
</tr>
<tr>
<td>对象图</td>
<td>结构(静态)</td>
<td>设计视图</td>
</tr>
<tr>
<td>状态图</td>
<td>行为(动态)</td>
<td>进程视图</td>
</tr>
<tr>
<td>序列图</td>
<td>行为(动态)</td>
<td>进程视图</td>
</tr>
<tr>
<td>协作图</td>
<td>行为(动态)</td>
<td>进程视图</td>
</tr>
<tr>
<td>活动图</td>
<td>行为(动态)</td>
<td>进程视图</td>
</tr>
<tr>
<td>包图</td>
<td>结构(静态)</td>
<td>实现视图</td>
</tr>
<tr>
<td>组件图</td>
<td>结构(静态)</td>
<td>实现视图</td>
</tr>
<tr>
<td>部署图</td>
<td>结构(静态)</td>
<td>拓扑视图</td>
</tr>
</tbody>
</table>
<ul>
<li>结构图：描述系统结构，是静态图</li>
<li>行为图：描述系统行为，是动态图</li>
</ul>
<h2 id="序列图"><a href="#序列图" class="headerlink" title="序列图"></a>序列图</h2><p>7种元素：角色(Actor)、对象(Object)、生命线(LifeLine)、控制焦点(Activation)、消息(Message)、自关联消息、组合片段</p>
<img src="/2019/08/15/编程思想/UML/UML概述/时序图.png">
<h3 id="角色-Actor"><a href="#角色-Actor" class="headerlink" title="角色(Actor)"></a>角色(Actor)</h3><p>系统角色，可以是人或者其他系统，子系统。以一个小人图标表示。</p>
<h3 id="对象-Object"><a href="#对象-Object" class="headerlink" title="对象(Object)"></a>对象(Object)</h3><p>对象位于时序图的顶部,以一个矩形表示。对象的命名方式一般有三种：</p>
<ol>
<li>对象名和类名。例如：华为手机:手机、loginServiceObject:LoginService。</li>
<li>只显示类名，不显示对象，即为一个匿名类。例如：:手机、:LoginSservice。</li>
<li>只显示对象名，不显示类名。例如：华为手机:、loginServiceObject:。</li>
</ol>
<h3 id="生命线-LifeLine"><a href="#生命线-LifeLine" class="headerlink" title="生命线(LifeLine)"></a>生命线(LifeLine)</h3><p>时序图中每个对象和底部中心都有一条垂直的虚线，这就是对象的生命线(对象的时间线)。以一条垂直的虚线表。</p>
<h3 id="控制焦点-Activation"><a href="#控制焦点-Activation" class="headerlink" title="控制焦点(Activation)"></a>控制焦点(Activation)</h3><p>控制焦点代表时序图中在对象时间线上某段时期执行的操作。以一个很窄的矩形表示。</p>
<h3 id="消息-Message"><a href="#消息-Message" class="headerlink" title="消息(Message)"></a>消息(Message)</h3><p>表现代表对象之间发送的信息。消息分为三种类型。</p>
<ul>
<li><strong>同步消息</strong>(Synchronous Message)<br>消息的发送者把控制传递给消息的接收者，然后停止活动，等待消息的接收者放弃或者返回控制。用来表示同步的意义。以一条<strong>实线+实心箭头</strong>表示。</li>
<li><strong>异步消息</strong>(Asynchronous Message)<br>消息发送者通过消息把信号传递给消息的接收者，然后继续自己的活动，不等待接受者返回消息或者控制。异步消息的接收者和发送者是并发工作的。以一条<strong>实线+大于号</strong>表示。</li>
<li><strong>返回消息</strong>(Return Message)<br>返回消息表示从过程调用返回。以<strong>小于号+虚线</strong>表示。</li>
</ul>
<h3 id="自关联消息"><a href="#自关联消息" class="headerlink" title="自关联消息"></a>自关联消息</h3><p>表示方法的自身调用或者一个对象内的一个方法调用另外一个方法。以一个<strong>半闭合的长方形+下方实心剪头</strong>表示。</p>
<h2 id="活动图"><a href="#活动图" class="headerlink" title="活动图"></a>活动图</h2><ul>
<li>一般活动图</li>
<li>带泳道的活动图</li>
<li>带对象流的活动图<h1 id="关系（4种）"><a href="#关系（4种）" class="headerlink" title="关系（4种）"></a>关系（4种）</h1></li>
</ul>
<p>UML 中类与类, 类与接口, 接口与接口这间的关系有: </p>
<ul>
<li>泛化(generalization) 关系</li>
<li>实现(realization)关系 </li>
<li>依赖(dependency)关系</li>
<li>关联(association)关系<ul>
<li>关联</li>
<li>聚合(aggregation)</li>
<li>合成/组合(composition)</li>
</ul>
</li>
</ul>
<h2 id="泛化-generalization"><a href="#泛化-generalization" class="headerlink" title="泛化(generalization)"></a>泛化(generalization)</h2><p>在Java中此类关系通过关键字 <code>extends</code> 明确标识</p>
<img src="/2019/08/15/编程思想/UML/UML概述/101.jpg">
<h2 id="实现-realization"><a href="#实现-realization" class="headerlink" title="实现(realization)"></a>实现(realization)</h2><p>在Java中此类关系通过关键字 <code>implements</code> 明确标识</p>
<img src="/2019/08/15/编程思想/UML/UML概述/102.jpg">
<h1 id="依赖-dependency"><a href="#依赖-dependency" class="headerlink" title="依赖(dependency)"></a>依赖(dependency)</h1><p>类A使用到了类B</p>
<p>在java中依赖关系体现为: <code>局部变量, 方法中的参数, 和对静态方法的调用</code></p>
<ul>
<li>依赖关系总是单向的 </li>
<li>这种使用关系是具有偶然性的、、临时性的、非常弱的</li>
</ul>
<img src="/2019/08/15/编程思想/UML/UML概述/103.jpg">
<h2 id="关联-association"><a href="#关联-association" class="headerlink" title="关联(association)"></a>关联(association)</h2><p>类A 有 成员变量类B</p>
<p>在java中关联关系是使用 <code>实例变量</code> 实现的</p>
<ul>
<li>单箭头表示单向关联</li>
<li>双箭头或不使用箭头表示双向关联<ul>
<li>不建议使用双向关联</li>
</ul>
</li>
<li>关联两个端点可以有一个基数, 表示这个关联的类可以有几个实例<ul>
<li>常见的基数及含义: <ul>
<li>0..1:0 或1 个实例. </li>
<li>0..*: 对实例的数目没有限制. </li>
<li>1: 只能有一个实例. </li>
<li>1..*: 至少有一个实例.</li>
</ul>
</li>
</ul>
</li>
<li>一种长期性的强依赖关系        </li>
</ul>
<img src="/2019/08/15/编程思想/UML/UML概述/104.jpg">
<h2 id="聚合-aggregation"><a href="#聚合-aggregation" class="headerlink" title="聚合(aggregation)"></a>聚合(aggregation)</h2><p>整体和个体之间has-a的关系，整体与部分之间是可分离的</p>
<ul>
<li>他们可以具有各自的生命周期</li>
<li>部分可以属于多个整体对象，也可以为多个整体对象共享</li>
<li>比如计算机与CPU、公司与员工的关系等</li>
</ul>
<p>在java中关联关系是使用 <code>实例变量</code> 实现的</p>
<ul>
<li>语法上是分不出关联和聚合的，只能从语义级别来区分<ul>
<li>关联关系中两个类是处于相同的层次</li>
<li>聚合关系中两不类是处于不平等的层次, 一个表示整体, 一个表示部分.</li>
</ul>
</li>
</ul>
<img src="/2019/08/15/编程思想/UML/UML概述/105.jpg">
<h2 id="组合-合成-composition"><a href="#组合-合成-composition" class="headerlink" title="组合(合成)(composition)"></a>组合(合成)(composition)</h2><p>整体和个体之间contains-a的关系，整体与部分是不可分的</p>
<ul>
<li>整体的生命周期结束也就意味着部分的生命周期结束</li>
<li>比如你和你的大脑；合成关系不能共享. </li>
</ul>
<p>这种关系比聚合更强，也称为<strong>强聚合</strong></p>
<img src="/2019/08/15/编程思想/UML/UML概述/106.jpg">
<p>一张图快速学会UML（聚合、组合、依赖、继承、接口、类）</p>
<img src="/2019/08/15/编程思想/UML/UML概述/uml.png">
<h1 id="参考-amp-扩展"><a href="#参考-amp-扩展" class="headerlink" title="参考&amp;扩展"></a>参考&amp;扩展</h1><ul>
<li><a href="https://www.jianshu.com/p/28200121a33d" target="_blank" rel="noopener">UML图总结</a></li>
<li><a href="https://blog.csdn.net/qq_42758288/article/details/86620768" target="_blank" rel="noopener">UML9种图的分类及运用</a></li>
<li><a href="http://justsee.iteye.com/blog/808799" target="_blank" rel="noopener">UML关系</a></li>
<li><a href="https://blog.csdn.net/fly_zxy/article/details/80911942" target="_blank" rel="noopener">UML时序图(Sequence Diagram)学习笔记</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="风" />
            
              <p class="site-author-name" itemprop="name">风</p>
              <p class="site-description motion-element" itemprop="description">随心而动，随刃而行</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">308</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">71</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">风</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  







  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_lines.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
